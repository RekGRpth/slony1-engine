$Id: RELEASE-1.2.2,v 1.1.2.3 2006-12-05 23:29:55 cbbrowne Exp $

Release 1.2.2 of Slony-I has the following bug fixes over 1.2.1:

- SGML tagging fixes to allow docs to be generated on Fedora

- Fixes to altperl scripts (init cluster, store node) so they would
  properly generate STORE PATH requests (which had broken when STORE
  LISTEN code was removed)

- If PostgreSQL version is 8.1 or greater, we can use pg_config
  sharedir. Otherwise we will resort to the default guessing mode.

- Some makefile hygenic fixes

- Added \n to a number of log requests

- Fix to UPDATE FUNCTIONS which did not consider versions 1.1.5/1.1.6
  to be members of the 1.1 stream.  The minor problem with this was
  that Slony-I tables wouldn't get altered to drop out OIDs.  The
  major problem was that the new table sl_registry wouldn't get
  created

- Removed some confusing NOTICEs concerning management of partial
  indexes on sl_log_1 and sl_log_2.

- Close file descriptors upon running slon_terminate_worker() so that
  we don't run out of file descriptors

- Added in sleep(10) requests in several places where attempts to
  access the database in the main thread fails; this means that, for
  instance, the main DB is down, the slon doesn't simply sit there
  continually attempting to reconnect, as many times per second as it
  can.

- Several fixes to RPM .spec files

- Environment fix to Win32 service

- Set escape_string_warning to off, to prevent pgsql log noise when
  replicating cross versions

- Fix memory leak: free logshipping query 

- Bug #1585 - on 8.0+, if TRUNCATE failed, indices were not being
  deactivated during SUBSCRIBE SET COPY request, greatly slowing loading
  of data.  Added a deactivation inside the exception block, so that
  indices are deactivated during the COPY no matter what.

- X-Fade noticed that UPGRADE FUNCTIONS was taking out exclusive locks
  on sl_log_1, sl_log_2, sl_seqlog, which means that doing a Slony-I
  upgrade involved imposing an application outage.

  Moved the ALTER TABLE ... WITHOUT OIDS requests for these tables to
  cleanup loops, elsewhere, so that these tables no longer need to be 
  locked as part of the upgrade process.

- Documentation changes: Need for client/server encodings to match

- Fixes to parameter handling and interpreter name for
  test_slony_state*.pl scripts

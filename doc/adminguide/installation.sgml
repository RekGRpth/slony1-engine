<!-- $Id: installation.sgml,v 1.7 2004-12-22 23:09:59 darcyb Exp $ -->
<article id="installation">
<title>Slony-I Installation</title>
<sect1>
<title>Slony-I Installation</title>
<para>You should have obtained the <productname>Slony-I</productname> source from
the previous step. Unpack it.</para>

<screen>
gunzip slony.tar.gz;
tar xf slony.tar
</screen>

<para> This will create a directory under the current directory with
the <productname>Slony-I</productname> sources.  Head into that that directory for the rest of
the installation procedure.</para>
</sect1>

<sect1>
<title>Short Version</title>

<para>
<screen>
./configure --with-pgsourcetree=/whereever/the/source/is 
gmake all; gmake install 
</screen>
</para>

</sect1>
<sect1>
<title>Configuration</title>

<para>The first step of the installation procedure is to configure the
source tree for your system.  This is done by running the
<application>configure</application> script.  In early versions,
<application>configure</application> needed to know where your
<productname>PostgreSQL</productname> source tree is, is done with the
<option>--with-pgsourcetree=</option> option.  As of version 1.1,
<productname>Slony-I</productname> is configured by pointing it to the various
library, binary, and include directories; for a full list of these
options, use the command <command>./configure --help</command>
</para>
</sect1>

<sect1>
<title>Example</title>

<screen>
./configure --with-pgsourcetree=/usr/local/src/postgresql-7.4.6
</screen>

<para>This script will run a number of tests to guess values for
various dependent variables and try to detect some quirks of your
system.  <productname>Slony-I</productname> is known to need a modified version of libpq on
specific platforms such as Solaris2.X on SPARC this patch can be found
at <ulink
url="http://developer.postgresql.org/~wieck/slony1/download/threadsafe-libpq-742.diff.gz">
http://developer.postgresql.org/~wieck/slony1/download/threadsafe-libpq-742.diff.gz</ulink></para>
</sect1>


<sect1>
<title>Build</title>

<para>To start the build process, type

<screen>
gmake all
</screen></para>

<para> Be sure to use GNU make; on BSD systems, it is called
<application>gmake</application>; on Linux, GNU make is typically the native
<application>make</application>, so the name of the command you type in may vary
somewhat. The build may take anywhere from a few seconds to 2 minutes
depending on how fast your hardware is at compiling things.  The last
line displayed should be</para>

<para> <command> All of Slony-I is successfully made.  Ready to
install.  </command></para>
</sect1>

<sect1>
<title> Installing Slony-I</title>

<para> To install Slony-I, enter

<command>
gmake install
</command></para>

<para>This will install files into postgresql install directory as
specified by the <option>--prefix</option> option used in the
PostgreSQL configuration.  Make sure you have appropriate permissions
to write into that area.  Normally you need to do this either as root
or as the postgres user.  </para>
</sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode:sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:slony.sgml
sgml-default-dtd-file:"./reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:("/usr/lib/sgml/catalog")
sgml-local-ecat-files:nil
End:
-->

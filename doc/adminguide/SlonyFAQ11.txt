%META:TOPICINFO{author="guest" date="1099542075" format="1.0" version="1.2"}%
%META:TOPICPARENT{name="SlonyFAQ"}%
---++ I need to drop a sequence from a replication set

If you are running 1.0.5 or later, there is a SET DROP SEQUENCE
command in Slonik to allow you to do this, parallelling SET DROP
TABLE.

If you are running 1.0.2 or earlier, the process is a bit more manual.

Supposing I want to get rid of the two sequences listed below,
whois_cachemgmt_seq and epp_whoi_cach_seq_, we start by needing the
seq_id values.

<verbatim>
oxrsorg=# select * from _oxrsorg.sl_sequence  where seq_id in (93,59);
 seq_id | seq_reloid | seq_set |				 seq_comment				 
--------+------------+---------+-------------------------------------
	  93 |  107451516 |		 1 | Sequence public.whois_cachemgmt_seq
	  59 |  107451860 |		 1 | Sequence public.epp_whoi_cach_seq_
(2 rows)
</verbatim>

The data that needs to be deleted to stop Slony from continuing to
replicate these are thus:

<verbatim>
delete from _oxrsorg.sl_seqlog where seql_seqid in (93, 59);
delete from _oxrsorg.sl_sequence where seq_id in (93,59);
</verbatim>

Those two queries could be submitted to all of the nodes via
ddlscript() / EXECUTE SCRIPT, thus eliminating the sequence everywhere
"at once."  Or they may be applied by hand to each of the nodes.

Similarly to SET DROP TABLE, this should be in place for Slony-I version
1.0.5 as SET DROP SEQUENCE.
